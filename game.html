<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Arbeidskrav 1!</title>
    <link rel="stylesheet" href="game.css" />
  </head>
  <!-- HTML KODEN TRENGER DU IKKE RØRE FOR Å LØSE OPPGAVENE. -->

  <body>
    <div class="main-container">
      <!-- Healthbars til heroene -->
      <div class="hero-health-containers">
        <div class="healthbar-container">
          <!-- healer-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar healer-health"></div>
          <div class="text-container">
            <p id="healer-name-txt">Henriette</p>
            <p id="healer-health-txt">400 / 400 HP</p>
          </div>
        </div>
        <div class="healthbar-container">
          <!-- archer-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar archer-health"></div>
          <div class="text-container">
            <p id="archer-name-txt">Ariana</p>
            <p id="archer-health-txt">600 / 600 HP</p>
          </div>
        </div>
        <div class="healthbar-container">
          <!-- warrior-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar warrior-health"></div>
          <div class="text-container">
            <p id="warrior-name-txt">Wyona</p>
            <p id="warrior-health-txt">800 / 800 HP</p>
          </div>
        </div>
      </div>

      <!-- Healthbar til fienden -->
      <div class="dragon-health-container">
        <div class="healthbar-container">
          <!-- dragon-health sin vidde må forandres for å endre lifebar -->
          <div class="healthbar dragon-health"></div>
          <div class="text-container">
            <p id="dragon-name-txt">Daar</p>
            <div class="text-container dragon-health-txt">2000 / 2000 HP</div>
          </div>
        </div>
      </div>

      <!-- Bildecontainere for heroene -->
      <div class="img-container healer">
        <img class="hero" src="assets/healer.png" />
      </div>
      <div class="img-container archer">
        <img class="hero" src="assets/archer.png" />
      </div>
      <div class="img-container warrior">
        <img class="hero" src="assets/warrior.png" />
      </div>

      <!-- Bildecontainer for fienden -->
      <div class="enemy-container">
        <div class="img-container dragon-container">
          <img class="dragon" src="assets/dragon.png" />
        </div>
      </div>
    </div>






  
    <script>
      //Denne JS-koden er laget klar for deg. Den trenger du ikke endre på.

      //Stats for heroes
      let heroesArray = [
        {
          id: 0,
          name: "Henriette Healer",
          maxHP: 400,
          currentHP: 400,
          damage: 100,
          alive: true,
        },
        {
          id: 1,
          name: "Ariana archer",
          maxHP: 500,
          currentHP: 500,
          damage: 400,
          alive: true,
        },
        {
          id: 2,
          name: "Wyona Warrior",
          maxHP: 600,
          currentHP: 600,
          damage: 400,
          alive: true,
        },
      ];

      let dragonObject = {
        name: "Daar Dragon",
        maxHP: 2000,
        currentHP: 2000,
        damage: 200,
        alive: true,
      };





      

//her legger jeg til en kode der hver av heltene får en "sporing/EVENTLISTNER" slikt at vi kan klikke på dem på nettsiden.

document.querySelector(".healer").addEventListener("click", function () {
      attackDragon(heroesArray[0]);
    });

    document.querySelector(".archer").addEventListener("click", function () {
      attackDragon(heroesArray[1]);
    });

    document.querySelector(".warrior").addEventListener("click", function () {
      attackDragon(heroesArray[2]);
    });
      // HERO ATTACK DRAGON
      // Her lager jeg en funksjon som skal vise til angrep fra hero mot dragen, jeg legger til parameteret "hero" som refererer til
      //heltene som gjør angrepet mot dragen

      function attackDragon(hero) {
      if (dragonObject.alive) {
        let damage = hero.damage;
        // Oppdaterer dragens liv etter angrep
        dragonObject.currentHP -= damage;
//    ALERT FUNKSJON
        alert(hero.name + " har påført " + damage + " skade på " + dragonObject.name);
        updateDragonHealthText();

        // Dragen angriper en tilfeldig helt etter heltens angrep
        setTimeout(dragonAttack, 1000);
      }
    }
    // Oppdaterer dragens helse i HTML
    function updateDragonHealthText() {
      const { currentHP, maxHP } = dragonObject;
      document.querySelector(".dragon-health-txt").textContent = `${currentHP} / ${maxHP} HP`;
    }
    
    // Funksjon for dragens angrep mot en tilfeldig helt
    function dragonAttack() {
      if (dragonObject.alive) {
        let randomHero = getRandomAliveHero();

        if (randomHero !== null) {
          let damage = dragonObject.damage;
          randomHero.currentHP -= damage;

          alert(dragonObject.name + " har angrepet " + randomHero.name + "!");
          updateHeroHealthText(randomHero.id);

          if (randomHero.currentHP <= 0) {
            randomHero.alive = false;
            alert(randomHero.name + " er beseiret av " + dragonObject.name + "!");
          }
        }
      }
    }
    

    // Hjelpefunksjon for å oppdatere en helt sin helse i HTML
    function updateHeroHealthText(heroId) {
      const { currentHP, maxHP } = heroesArray[heroId];
      document.querySelector(`#${heroesArray[heroId].name.toLowerCase()}-health-txt`).textContent = `${currentHP} / ${maxHP} HP`;
    }

    // Hjelpefunksjon for å sjekke om en helt er i live
    function isHeroAlive(hero) {
      return hero.alive && hero.currentHP > 0;
    }

    // Hjelpefunksjon for å få en tilfeldig, levende helt
    function getRandomAliveHero() {
      let aliveHeroes = heroesArray.filter(isHeroAlive);
      if (aliveHeroes.length > 0) {
        let randomIndex = Math.floor(Math.random() * aliveHeroes.length);
        return aliveHeroes[randomIndex];
      }
      return null;
    }
    </script>
  </body>
</html>
